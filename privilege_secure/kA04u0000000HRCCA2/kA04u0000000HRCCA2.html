<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Add Microsoft Entra ID as an Authentication Connector (OpenID Connect)</title><meta name="label" content="privilege_secure"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000HRCCA2"/><meta name="Id" content="ka0Qk0000000xRVIAY"/><meta name="LastPublishedDate" content="2023-12-12T15:10:15.000+0000"/><meta name="LastModifiedDate" content="2023-12-12T15:10:15.000+0000"/><meta name="FirstPublishedDate" content="2021-10-12T13:39:03.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="5910"/><meta name="ArticleNumber" content="000005910"/><meta name="description" content="Add Azure Active Directory as an Authentication Connector (OpenID Connect)"/></head><body><article class=" kb-articles"><div class="Content__c"><h2 id="summary">Summary</h2>

<p>This article outlines the process of adding Microsoft Entra ID (formerly Azure AD) to Netwrix Privilege Secure as an Authentication Connector via OpenID Connect (OIDC). The article is split into two sections, <em><a href="#h_01F99BMGHM6J0NE7A3WMSMBCVD"><strong>Steps for Microsoft Entra ID</strong></a> </em>and <em><strong><a href="#h_01F99BMRDEEERH8T1FMS3JVHZ5">Steps for Netwrix Privilege Secure</a>. </strong></em>The Microsoft Entra ID section must be completed first.</p>

<h2 id="instructions">Instructions</h2>

<h3 id="h_01F99BMGHM6J0NE7A3WMSMBCVD"><a id="Steps-for-Azure" name="Steps-for-Azure">Steps for Microsoft Entra ID</a></h3>

<p>The following steps need to be taken in Microsoft Entra ID, as an admin, to prepare an app registration for use with Netwrix Privilege Secure.</p>

<ol><li>Navigate to <a href="https://portal.azure.com/" target="_blank">https://portal.azure.com/</a> and sign-in to Microsoft Entra ID as an admin. You'll need to create an Enterprise Application.<br/>	 </li><li>Click <strong>Azure Active Directory</strong> from the left sidebar, then click <strong>App Registrations</strong>. Next, click <strong>New Registration </strong>near the top of the page.<br/>	 </li><li>Give the app any name you prefer. The only other setting that needs to be changed is the <strong>Redirect URI</strong>. It should be the following, replacing <em><strong>your-sbpam-server-hostname</strong></em> with the hostname of your Netwrix Privilege Secure server.<br/>	 
	<pre>https://your-sbpam-server-hostname:6500/callback</pre>
	<br/>	<img alt="User-added image" height="73" src="kA04u0000000HRCCA2_7e435242-58ca-4c39-a517-da25911268e6.png" width="500"/><br/>	 </li><li>Click <strong>Register</strong>. Once app registration completes, you'll be redirected to the new app's <strong>Overview</strong> page.<br/>	 </li><li>In the left sidebar, click <strong>Authentication</strong>. Scroll down and fill in the <strong>Front-channel logout URL </strong>field with the same <strong>Callback Address</strong> used in Step 3.<br/>	<br/>	Also, scroll down and enable the following checkboxes:<br/>	<br/>	<strong>- Access tokens (used for implicit flows)</strong><br/>	<strong>- ID tokens (used for implicit and hybrid flows)</strong><br/>	<br/>	<img alt="User-added image" height="238" src="kA04u0000000HRCCA2_defdfcb9-a4b2-46a0-b0fc-9eebd1e6f5b2.png" width="500"/><br/>	 </li><li>Click <strong>Save </strong>at the top of the page, and return to the app's <strong>Overview</strong> page.<br/>	 </li><li>Click <strong>Endpoints</strong>, near the top of the page. Copy the <strong>OpenID Connect metadata document</strong> URL and open it in a new browser tab.<br/>	<br/>	This will display JSON data, which can be tough to read in raw form. To make it easier to read, consider installing a JSON browser extension such as <strong>JSON Formatter</strong> for Chromium-based browsers.<br/>	 </li><li>While still viewing the JSON data, find the <strong>Issuer</strong> key and save its value (in this case it will be a URL). For example:<br/>	 
	<pre>"issuer": "https://login.microsoftonline.com/&lt;GUID&gt;/v2.0"</pre>
	<br/>	 </li><li>Close the <strong>Endpoints</strong> sidebar, and save the <strong>Application (client) ID </strong>from the <strong>Overview </strong>page.</li></ol>

<h3 id="h_01F99BMRDEEERH8T1FMS3JVHZ5"><a id="Steps-for-SbPAM" name="Steps-for-SbPAM">Steps for Netwrix Privilege Secure</a></h3>

<p>Once the <em><strong>Steps for Microsoft Entra ID</strong> </em>have been completed, take the following steps in Netwrix Privilege Secure to add Microsoft Entra ID as an Authentication Connector via OpenID Connect (OIDC).</p>

<ol><li>As an Netwrix Privilege Secure Admin, navigate in Netwrix Privilege Secure to <strong>Configuration &gt; Authentication</strong>, and click the green <strong>"+" </strong>button to add a new Authentication Connector.<br/>	 </li><li>Give the new connector a name, description (optional), and a Connector Type of "OpenID Connect".<br/>	<br/>	<img alt="User-added image" height="118" src="kA04u0000000HRCCA2_9cdef3a0-1925-4683-a5d2-3282fd5ab38f.png" width="500"/><br/>	 </li><li>Click on <strong>Configuration Wizard</strong>.<br/>	 </li><li>On the wizard's <strong>Configure Client</strong> page, enter the <strong>Issuer </strong>and <strong>Client ID </strong>(from the <em><strong>Steps for Microsoft Entra ID</strong>)</em> in each respective field.<br/>	<br/>	<img alt="User-added image" height="238" src="kA04u0000000HRCCA2_5127d708-049e-40a1-b91e-dccc27e7a3b4.png" width="500"/></li><li>Click <strong>Test Connection</strong>.<br/>	<br/>	On the page that loads (Microsoft Entra ID sign-in page) <span class="wysiwyg-color-red110"><strong>DO NOT SIGN-IN</strong></span>. Instead, once you've verified that the sign-in page loaded property, click the back button in the browser to return to Netwrix Privilege Secure (the connection test was successful if Microsoft Entra ID didn't display an error).</li><li>Click <strong>Next </strong>to advance in the Authentication Connector Configuration Wizard. You'll now be on the wizard's <strong>Test Login </strong>page.<br/>	 </li><li>Click <strong>Login</strong>, and log-in as any Microsoft Entra ID user (this does not need to be an admin). You'll be prompted to accept the app's requested permissions. Check <b>Consent on behalf of your organization</b>, and click <strong>Accept</strong>.<br/>	<br/>	<img alt="User-added image" src="kA04u0000000HRCCA2_83539fbb-be86-442d-a286-dd00325d48eb.png"/></li><li>Click <strong>Next</strong> in the wizard. You will now be on the <strong>Configure Id Mapping</strong> page.<br/>	 </li><li>Click <strong>Get User Data</strong>.<br/>	<br/>	Netwrix Privilege Secure will use the access token to retrieve user data from the OpenID Connect provider. The OpenID Connect provider requires a User Id Field for sign in.<br/>	<br/>	It is necessary to specify which field in Active Directory should map to that User Id Field, so that Netwrix Privilege Secure can automatically fill in the required credentials at login. The value provided is used to sign in to the multi factor authenticator (MFA) when a user logs in to the Netwrix Privilege Secure Console.<br/>	<br/>	In order to connect a user from the OpenID Connect provider to a user in the Netwrix Privilege Secure copy of the AD data, it is necessary to map a field in the provider list to a field in the Netwrix Privilege Secure host user table. The exact fields to map will vary between providers and according to the user’s AD configuration.<br/>	<br/>	The table displays the retrieved data that can be used for the host user lookup. The user must select from the displayed records a field that corresponds to a value in their AD configuration. For example, if the AD data contains email addresses, they can select any of the fields which contain email addresses.<br/>	<br/>	<strong>In simple terms, there needs to be a property for each user in on-prem Active Directory and Microsoft Entra ID that matches. Often, this is an email address.</strong><br/>	<br/>	<em><span class="wysiwyg-color-red110"><strong>IMPORTANT: </strong>Make sure to use a field that has an <strong>ID TOKEN</strong> source, rather than ACCESS TOKEN.</span><br/>	<br/>	<span class="wysiwyg-color-red110"><strong><img alt="User-added image" height="162" src="kA04u0000000HRCCA2_7046b114-8b38-4ccf-930b-ac9d32ac398d.png" width="500"/></strong></span></em><br/>	<br/>	<span class="wysiwyg-color-black">Once the desired field has been found, click on it and then click <strong>Select</strong>.</span></li><li><span class="wysiwyg-color-black">You will now be back in the Authentication Connector Configuration Wizard, on the <strong>Configure Id Mapping </strong>page. Make sure the <strong>Login Format</strong> dropdown is for a format that will match the ID Token field selected from Microsoft Entra ID in the previous step.<br/>	<br/>	For example, if you chose <strong>Email</strong> for the field in the previous step then this dropdown should also be <strong>Email Address</strong>.<br/>	<br/>	<img alt="User-added image" src="kA04u0000000HRCCA2_dfd101ce-e536-433f-8c53-2cb5cdd88425.png"/></span></li><li><span class="wysiwyg-color-black">Click <strong>Finish </strong>on the summary modal, and then <strong>Save</strong> for the authentication connector.</span><br/>	 </li><li><span class="wysiwyg-color-black">You can now assign this authentication connector to a user via the <strong>Authentication Connector </strong>tab for a user accessed in Netwrix Privilege Secure's <strong>Users &amp; Groups</strong> page.<br/>	<br/>	<img alt="User-added image" height="273" src="kA04u0000000HRCCA2_679f226b-c576-4931-bbe8-ba4546403757.png" width="500"/><br/>	<br/>	Users with this authentication connector assignment can now use this authentication connector option on the Netwrix Privilege Secure log-in screen.<br/>	<br/>	<img alt="User-added image" src="kA04u0000000HRCCA2_89d6da70-58f4-4908-99cb-b60d39a2b3a5.png"/><br/>	<br/>	When using the OpenID Connect log-in option, the user will be redirected to sign-in to Microsoft Entra ID. Upon successful authentication, the user will be redirected to the Netwrix Privilege Secure UI as their now signed-in user.</span></li></ol></div>
</article></body></html>