<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Moving the PostgreSQL Data Directory (PgDataDir) to a New Location</title><meta name="label" content="privilege_secure"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000HjaCAE"/><meta name="Id" content="ka04u000000HcaHAAS"/><meta name="LastPublishedDate" content="2022-01-27T17:17:16.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T09:57:53.000+0000"/><meta name="FirstPublishedDate" content="2022-01-25T21:58:21.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="5942"/><meta name="ArticleNumber" content="000005942"/><meta name="description" content="Moving the PostgreSQL Data Directory (PgDataDir) to a New Location"/></head><body><article class=" kb-articles"><div class="Content__c"><h2 id="summary">Summary</h2>
This article outlines the steps required for moving an installed SbPAM PostgreSQL data directory (PgDataDir) to a new location. In a High Availability (HA) pair, this needs to be done on each server separately.

<h2 id="instructions">Instructions</h2>
<b>1. </b>While SbPAM is not in use, stop the service <b>postgresql-x64-12 - PostgreSQL Server 12</b> in the <b>Windows Services</b> menu (<b>services.msc</b>).<br/><br/><b>2. </b>Open the Windows Registry and navigate to:<br/> 
<pre class="ckeditor_codeblock">Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\postgresql-x64-12</pre>
<br/>Customize the value of <b>ImagePath</b> to reflect the data directory's new location. It's important to note only the path between quotes after <b>-D</b> should be customized, as this is the path to the database.<br/><br/><b>3. </b>In the Windows Registry navigate to:<br/> 
<pre class="ckeditor_codeblock">Computer\HKEY_LOCAL_MACHINE\SOFTWARE\PostgreSQL\Services\postgresql-x64-12 </pre>
<br/>Customize the value of <b>Data Directory</b> to reflect the data directory's new location.<br/><br/><b>4. </b>In the Windows Registry navigate to:<br/> 
<pre class="ckeditor_codeblock">Computer\HKEY_LOCAL_MACHINE\SOFTWARE\PostgreSQL\Installations\postgresql-x64-12 </pre>
<br/>Customize the value of <b>Data Directory</b> to reflect the data directory's new location.<br/><br/><b>5. </b>You can now move the PostgreSQL data directory to its new location, which should be the same path specified in the previous steps.<br/><br/><span><i><b>IMPORTANT: </b>It's recommended to make a backup of the PostgreSQL data directory before making manual modifications, moving it, etc.</i></span><br/><br/><b>6. </b>Once the PostgreSQL data directory has been moved, start the service <b>postgresql-x64-12 - PostgreSQL Server 12</b> in the <b>Windows Services</b> menu (<b>services.msc</b>).<br/><br/><span><i><b>IMPORTANT: </b>After moving the database to a new location, it's recommended to add the Network Service account to the new folder's Access Control List (ACL).</i></span><br/><br/><b>7.</b> Verify you can log-in to SbPAM per normal workflow, navigate the UI, provision sessions, etc. If everything seems normal, then the process is complete.​​​​​​</div>
</article></body></html>