<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Hotfix: SIEntManager_7.3.5.154</title><meta name="label" content="employees_v"/><meta name="label" content="threat_prevention"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000JupCAE"/><meta name="Id" content="ka04u000000HdCMAA0"/><meta name="LastPublishedDate" content="2022-03-10T19:54:37.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T10:18:44.000+0000"/><meta name="FirstPublishedDate" content="2022-03-04T20:23:50.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="8387"/><meta name="ArticleNumber" content="000008387"/><meta name="description" content="automated failover of SI Enterprise Manager"/></head><body><article class=" kb-articles"><div class="Content__c"><span><span><span><strong><span>Summary: </span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>Bug 85640: 00330364 - automated failover of SI Enterprise Manager</span></span></span></span></span><br/><span><span><span><strong><span>Behavior before Fix: </span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>EM reads Server table only at startup. Then with 5 minutes interval it will delete all entries from the Server table and will insert those which are “known” by this instance of EM. Therefore, if there is more than one instance of EM is running then there is no way for other instance to know Agents from the first instance.</span></span></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>As a result - when Agent switches to a different EM instance then there is a risk that this Agent will be unable to communicate with this instance because it is unknow for this instance because there is no information about Agent certificate.</span></span></span></span></span><br/><span><span><span><strong><span>Behavior after Fix: </span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>Every time before EM tries to re-insert data into Server table it will get all entries from this table with nonempty certificate thumbprint value and merges this information into the in-memory list of servers using the following logic:</span></span></span></span></span>
<ol><li><span><span><span><span class="MsoSubtleEmphasis"><span>If there is already an entry with this certificate thumbprint then ignore it.</span></span></span></span></span></li><li><span><span><span><span class="MsoSubtleEmphasis"><span>If there is already an entry with the same server name but certificate thumbprint is empty then use certificate thumbprint value from the Server table.</span></span></span></span></span></li><li><span><span><span><span class="MsoSubtleEmphasis"><span>If there is no entry with such certificate thumbprint and server name, then add this entry.</span></span></span></span></span></li></ol>
<span><span><span><b>Changes since Last Hotfix:</b></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>Bug 85640: 00330364 - automated failover of SI Enterprise Manager</span></span></span></span></span><br/><span><span><span><strong><span>Submitted by: </span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>Maxim Sidarau   </span></span></span></span></span><br/><span><span><span><strong><span>Affected Versions:</span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>7.3.5.153 and older</span></span></span></span></span><br/><span><span><span><strong><span>Affected Module:</span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>SI - Enterprise Manager</span></span><strong> </strong></span></span></span><br/><span><span><span><strong><span>Dev Ticket:</span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>85640</span></span></span></span></span><br/><span><span><span><strong><span>Resolved in Version:</span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>7.3.5.154</span></span></span></span></span><br/><span><span><span><strong><span>KB Type: </span></strong></span></span></span><br/><span><span><span class="MsoSubtleEmphasis"><span>Hotfix</span></span></span></span><br/><br/><span><span><span><span class="MsoSubtleEmphasis"><span><b>Modules Included: </b>SI - Enterprise Manager</span></span><strong> </strong></span></span></span><br/><span><span><span><b>Escalations: </b><span class="MsoSubtleEmphasis"><span>00330364</span></span></span></span></span><br/><span><span><span><b>Cumulative List of fixes included since Service Pack:</b></span></span></span><br/><span><span><span><strong><span>Instructions:</span></strong></span></span></span><br/><span><span><span><span class="MsoSubtleEmphasis"><span>Upgrade SI Enterprise Manager to new version using SI Server installer </span></span></span></span></span><br/> </div>
</article></body></html>