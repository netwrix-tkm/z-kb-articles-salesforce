<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>calculate percentages in SQL properly</title><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000IQqCAM"/><meta name="Id" content="ka04u000000Hcn6AAC"/><meta name="LastPublishedDate" content="2022-02-22T13:39:50.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T10:06:55.000+0000"/><meta name="FirstPublishedDate" content="2022-02-01T18:45:14.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="7387"/><meta name="ArticleNumber" content="000007387"/><meta name="description" content="360008816812"/></head><body><article class=" kb-articles"><div class="Content__c"><p><strong><span class="wysiwyg-font-size-large">Summary:</span></strong> When working with TSQL percentages you see unexpected results where a percent will either be 0 or 100.</p>

<p><strong><span class="wysiwyg-font-size-large">Issue:</span></strong> Number values tend to be INTERGER (int) type, when working with percentages SQL expects decimal. We can code round this using the following to options.<br/> </p>

<p><strong><span class="wysiwyg-font-size-large">Instructions:</span></strong> In the following example, both data types are int, so the result of the operation is also an int instead of a decimal, which would be required to show the percentage value we are trying to generate. For example, the following calculation returns 0:<br/> <br/>SELECT 3/4 * 100<br/>GO<br/>We actually expect the answer to be 75. But SQL Server sees you dividing the integer 3 by the integer 4.<br/> <br/>The below examples will show us what we expect to see:<br/> <br/>SELECT 3.0/4.0 * 100<br/>GO<br/>or<br/> <br/>SELECT cast(3 as decimal)/ cast(4 as decimal) * 100<br/>GO<br/>These examples return the value you're looking for because you're explicitly casting the integer values as decimals. The first example forces the integer to become a decimal by referencing the integer 3 as the decimal number 3.0. The second example uses the Cast() function to do the same.<br/> <br/>Optionally you can also perform a calculation to the decimal. For example 75.1%<br/> <br/>To do this we can utilise the ROUND() function which rounds a number to a specified number of decimal places<br/>Parameter: <span><span><span>ROUND(</span></span></span><em><span><span><span>number</span></span></span></em><span><span><span>, </span></span></span><em><span><span><span>decimals</span></span></span></em><span><span><span>, </span></span></span><em><span><span><span>operation</span></span></span></em><span><span><span>)</span></span></span><br/> <br/>Example: SELECT cast(Round(((3*100.0)/4)) as decimal(5,1))<br/> </p>

<p><strong><span class="wysiwyg-font-size-large">Legacy Article ID:</span></strong> 2300</p></div>
</article></body></html>