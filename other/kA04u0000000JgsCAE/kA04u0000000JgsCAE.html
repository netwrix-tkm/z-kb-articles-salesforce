<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Support Process - Enabling Change Tracker's Okta SSO Support Internal</title><meta name="label" content="employees_v"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000JgsCAE"/><meta name="Id" content="ka04u000000HdBRAA0"/><meta name="LastPublishedDate" content="2022-02-07T01:02:56.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T10:18:21.000+0000"/><meta name="FirstPublishedDate" content="2022-02-07T01:02:56.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="8317"/><meta name="ArticleNumber" content="000008317"/><meta name="description" content="HELPDESK"/></head><body><article class=" kb-articles"><div class="Content__c"><p>This NNT how-to article covers the configuration changes necessary to enable Single Sign On (SSO) into Change Tracker using Okta as an Identity Provider (IDP).</p><p>The configuration is relatively simple, but the application must be registered with Okta before the relevant configuration changes can be applied to the Change Tracker installation. This guide will cover the necessary steps in both environments.</p><p><strong><u>For Okta SSO, your NNT Change Tracker must be version 7.3.1.1 or above.</u></strong></p><p>If you are required to create / register the application with Okta, you might like to refer to the online guide <a class="external-link" href="https://developer.okta.com/docs/guides/sign-into-web-app/aspnet/create-okta-application/" target="_blank">here</a> which forms the basis of this step-by-step guide. If however the application has already been created by the client, you only need collect certain settings; proceed to Configure the Change Tracker Application.</p><h2 id="SupportProcess-EnablingChangeTracker'sOktaSSOSupportInternal-Step-by-stepguide">Step-by-step guide</h2><ul><li><p>Confirm your Change Tracker version as directed above.</p></li><li><p>Confirm the NNT Change Tracker server can communicate with the Okta servers e.g. <a class="external-link" href="https://dev-6082949.okta.com/" target="_blank">https://dev-6082949.okta.com/</a> (NB the subdomain will vary between clients).</p></li></ul><h3 id="SupportProcess-EnablingChangeTracker'sOktaSSOSupportInternal-CreatetheOktaApplication:">Create the Okta Application:</h3><ul><li><p>Sign in to the <a class="external-link" href="https://login.okta.com/" target="_blank">Okta Admin Console</a> with an admin level account.</p></li><li><p>Select <strong>Applications</strong>, then <strong>Add Application</strong>. Pick <strong>Web</strong> as the platform. Click <strong>Next</strong>.</p></li><li><p>Enter a name for your application (something like NNT or Change Tracker is recommended, though not critical).</p></li><li><p>Add the <strong>Base URI</strong> of your Change Tracker installation, such as <code>https://changetracker.customer.com</code>.</p></li><li><p>Next, enter the <strong>Login redirect URI</strong> which is the <strong>Base URI</strong> plus <code>/api/auth/okta</code>, such as <code>https://changetracker.customer.com/api/auth/okta</code>.</p></li><li><p>The <strong>Logout redirect URI</strong> field can be cleared; it’s not currently required.</p></li><li><p>Under <strong>Grant type allowed</strong>, ensure that the <strong>Client acting on behalf of a user / Authorization Code</strong> field is checked. The other related fields should be left unchecked.</p></li><li><p>Click <strong>Done</strong> to finish creating the Okta application. You need to copy some values into your Change Tracker configuration, so leave the Admin Console open.</p></li></ul><h3 id="SupportProcess-EnablingChangeTracker'sOktaSSOSupportInternal-ConfiguretheChangeTrackerApplication:">Configure the Change Tracker Application:</h3><ul><li><p>If necessary, sign in to the <a class="external-link" href="https://login.okta.com/" target="_blank">Okta Admin Console</a> with an admin level account.</p></li><li><p>Select <strong>API</strong>, then <strong>Authorization Servers</strong>. If there is more than one Authorization Server in the list, the client will need to clarify which one is to be used to secure the application. Once you have established which one to use, take note of it’s <strong>Issuer URI</strong>, such as <code>https://dev-6082949.okta.com/oauth2/default</code>.</p></li><li><p>Locate the configuration folder for the Change Tracker installation, and the environment-specific configuration file within, such as  <code>appsettings.Production.json</code>.</p></li><li><p>Locate or add the <strong>security / oauth / okta</strong> section as below (this can also be generated using the Maintenance application, if necessary):</p></li></ul><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="kA04u0000000JgsCAE_91e60cc4-568d-4747-aade-90b3dd4fb6d9.png"/></span><ul><li><p>Set the <strong>accessTokenUrl</strong> value to the <strong>Issuer URI</strong> plus <code>/v1/token</code>, such as <code>https://dev-6082949.okta.com/oauth2/default/v1/token</code>.</p></li><li><p>Set the <strong>authorizeUrl</strong> value to the <strong>Issuer URI</strong> plus <code>/v1/authorize</code>, such as <code>https://dev-6082949.okta.com/oauth2/default/v1/authorize</code>.</p></li><li><p>Set the <strong>userProfileUrl</strong> value to the <strong>Issuer URI</strong> plus <code>/v1/userinfo</code>, such as <code>https://dev-6082949.okta.com/oauth2/default/v1/userinfo</code>.</p></li><li><p>Return the <a class="external-link" href="https://login.okta.com/" target="_blank">Okta Admin Console</a>, select <strong>Applications</strong>, then the link for your application.</p></li><li><p>Set the <strong>callbackUrl</strong> value to the <strong>Login redirect URI</strong> which you supplied when creating the Okta application, above.  Alternatively, copy it from the Admin Console but note that it is possible to configure more than one if the application is to be used across multiple environments e.g. Dev, Test, Prod etc.</p></li><li><p>Set the <strong>clientId</strong> value to the <strong>Client ID</strong> copied from the Admin Console.</p></li><li><p>Set the <strong>clientSecret</strong> value to the <strong>Client secret</strong> copied from the Admin Console.</p></li><li><p>Finally, ensure that there is an <strong>enabled</strong> key, and that  it’s value is set to <code>true</code>.</p></li><li><p>Save your changes to the config file, and restart the web site.</p></li></ul><p>If the above has been correctly configured, the Change Tracker sign-in dialog should now give the option to “Sign In with Okta”. Click this, and you should be directed to the Okta site where you now sign in using credentials which have been configured there:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" alt="Sign In to Change Tracker dialog including Sign In with Okta buttonbutton" src="kA04u0000000JgsCAE_30a610cb-de49-4026-978a-d26ec357951d.png"/></span><p>If successful, you’ll be returned to Change Tracker. The first time this happens, a user account will be created within Change Tracker and assigned to the User role; this can then be amended by an Admin in the usual way. Subsequent sign-ins will not change any new role assignments. NB this behaviour may be subject to change in future, as we may elect to pull Role assignments from Okta instead.</p><h3 id="SupportProcess-EnablingChangeTracker'sOktaSSOSupportInternal-ConfiguretheOktaApplicationtoshowChangeTrackerintheOktadashboard(Optional):">Configure the Okta Application to show Change Tracker in the Okta dashboard (Optional):</h3><p>If the client would prefer to sign in to the Okta portal first, before opening Change Tracker from a dashboard ‘chiclet’ (app shortcut) the Okta application requires some additional configuration. See this <a class="external-link" href="https://support.okta.com/help/s/article/How-to-make-the-OIDC-OAuth-App-visible-in-Okta-dashboard-and-what-are-the-login-flows-available?language=en_US" target="_blank">guide</a> for more information.</p><ul><li><p>If necessary, sign in to the <a class="external-link" href="https://login.okta.com/" target="_blank">Okta Admin Console</a> with an admin level account.</p></li><li><p>Select <strong>Applications</strong>, then follow the link for your Application. In the <strong>General Settings</strong> section, click <strong>Edit</strong>.</p></li><li><p>Under <strong>Grant type allowed / Client acting on behalf of a user</strong> ensure <strong>Authorization Code</strong> is checked.</p></li><li><p>Under <strong>Grant type allowed / Client acting on behalf of a user</strong> ensure <strong>Implicit (Hybrid)</strong> is checked, and under that ensure <strong>Allow ID Token with implicit grant type</strong> is checked.</p></li><li><p>Under <strong>Login initiated by</strong>, select <strong>Either Okta or App</strong> which enables the <strong>Application visibility</strong> and <strong>Login flow</strong> sections.</p></li><li><p>Under <strong>Application visibility</strong>, ensure that the <strong>Display application icon to users</strong> field is checked.</p></li><li><p>Under <strong>Login flow</strong>, ensure that the <strong>Redirect to app to initiate login</strong> option is selected.</p></li><li><p>Next, enter the <strong>Initiate login URI</strong> which is the <strong>Login redirect URI</strong> plus <code>?continue=/</code>, such as <code>https://changetracker.customer.com/api/auth/okta?continue=/</code>.</p></li><li><p>Click <strong>Save</strong> to commit your changes.</p></li><li><p>(Optional) Upload a custom logo for the ‘chiclet’ (app shortcut). Locate the shortcut preview at the top-left of the Application editing page, and click the edit icon in it’s top-right corner. The <strong>Edit Logo</strong> dialog opens, which allows you to browse for an icon.</p></li></ul><p>The logo taken from the corporate website works well:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="kA04u0000000JgsCAE_7a2d93ba-0ff2-4026-a0e4-e6cea445c4e3.png"/></span><p>If the above has been correctly configured, signing in to Okta should give the option of opening the Change Tracker application direct from the dashboard:</p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" src="kA04u0000000JgsCAE_095ea3c8-2bd9-4b1c-a036-c9e026e5931d.png"/></span><p> </p></div>
</article></body></html>