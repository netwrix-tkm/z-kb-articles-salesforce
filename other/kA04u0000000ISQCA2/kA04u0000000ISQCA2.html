<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Manually Removing Stale Activity Data</title><meta name="label" content="employees_v"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000ISQCA2"/><meta name="Id" content="ka04u000000HcnbAAC"/><meta name="LastPublishedDate" content="2022-02-01T18:22:51.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T10:07:12.000+0000"/><meta name="FirstPublishedDate" content="2022-02-01T18:22:51.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="6585"/><meta name="ArticleNumber" content="000006585"/><meta name="description" content="360008408371"/></head><body><article class=" kb-articles"><div class="Content__c"><p><strong><span class="wysiwyg-font-size-large">Summary:</span></strong> How to manually removing stale activity data</p>
<p><strong><span class="wysiwyg-font-size-large">Issue:</span></strong> to delete activity older than the retention period, manually</p>
<p><strong><span class="wysiwyg-font-size-large">Instructions:</span></strong> -------------------------------------------------------------------<br/>--  Copyright (C) 2015 STEALTHbits Technologies, Inc.<br/>--  Written by:     Matt Squicciarini<br/>--  Date:          5/13/2015<br/>--  Updated:      9/1/2016 for removing activity older than a certain date <br/><br/>--update the getdate()-90 / getdate()-120 to whatever date range you want <br/><br/>--notice that 90 days is default for detailed activity while 120 is default in the bottom query for daily activity<br/><br/>---------------------------------------------------------------------<br/><br/>--activity <br/><br/>deleteMore: if object_id('SA_fsac_permissionchanges','table') is not null <br/>DELETE TOP(100000) SA_fsac_permissionchanges where host in (1,2,3) and activityid in (select id from sa_fsac_activityevents where accesstime &lt; getdate()-90 and host in (1,2,3) )<br/>IF @@ROWCOUNT != 0 goto deleteMore<br/>go<br/>deleteMore: if object_id('SA_fsac_renametargets','table') is not null <br/>DELETE TOP(100000) SA_fsac_renametargets where host in (1,2,3) and activityid in (select id from sa_fsac_activityevents where accesstime &lt; getdate()-90 and host in (1,2,3) )<br/>IF @@ROWCOUNT != 0 goto deleteMore<br/><br/>go<br/>deleteMore: if object_id('SA_FSAC_OwnerChanges','table') is not null <br/>DELETE TOP(100000) SA_FSAC_OwnerChanges where host in (1,2,3) and activityid in (select id from sa_fsac_activityevents where accesstime &lt; getdate()-90 and host in (1,2,3) )<br/>IF @@ROWCOUNT != 0 goto deleteMore<br/><br/>go<br/>deleteMore: if object_id('SA_fsac_activityevents','table') is not null <br/>DELETE TOP(100000) SA_fsac_activityevents where host in (1,2,3) and accesstime &lt; getdate()-90<br/>IF @@ROWCOUNT != 0 goto deleteMore<br/>go<br/><br/><br/>deleteMore: if object_id('SA_fsac_DailyActivity','table') is not null <br/>DELETE TOP(100000) SA_fsac_DailyActivity where host in (1,2,3) and activitydate &lt; getdate()-120<br/>IF @@ROWCOUNT != 0 goto deleteMore<br/>go<br/><br/><br/><br/><br/><br/><br/> </p>
<p><strong><span class="wysiwyg-font-size-large">Product:</span></strong> StealthAUDIT<br/><strong><span class="wysiwyg-font-size-large">Module:</span></strong> SA - DC - FSAA - Activity<br/><strong><span class="wysiwyg-font-size-large">Versions:</span></strong> 7.0 +<br/><strong><span class="wysiwyg-font-size-large">Salesforce Article ID:</span></strong> 000001323</p></div>
</article></body></html>