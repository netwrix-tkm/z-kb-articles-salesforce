<?xml version="1.0" encoding="UTF-8"?><html><head><meta charset="utf-8"/><title>Hotfix: SA_8.0_089</title><meta name="label" content="employees_v"/><meta name="label" content="skb"/><meta name="KnowledgeArticleId" content="kA04u0000000IZlCAM"/><meta name="Id" content="ka04u000000HcqUAAS"/><meta name="LastPublishedDate" content="2022-02-01T18:25:26.000+0000"/><meta name="LastModifiedDate" content="2023-05-08T10:08:25.000+0000"/><meta name="FirstPublishedDate" content="2022-02-01T18:25:26.000+0000"/><meta name="Language" content="en_US"/><meta name="UrlName" content="6743"/><meta name="ArticleNumber" content="000006743"/><meta name="description" content="360012326291"/></head><body><article class=" kb-articles"><div class="Content__c"><p><strong><span class="wysiwyg-font-size-large">Summary:</span></strong> Foreign Key Constraint Violation during FSAC bulk import.</p><p><strong><span class="wysiwyg-font-size-large">Issue:</span></strong> </p><h2 id="summary_foreign_key_constraint_violation_during_fsac_bulk_import"><strong><span>Summary:  Foreign Key Constraint Violation during FSAC bulk import.</span></strong></h2><strong><span>Before Fix: FK violation would occur due to a signed 32 bit integer overflow when chunking activity imports where the activity ID exceeds 2147483647. </span></strong><br/><br/>After Fix: Overflow no longer occurs.<br/><br/><strong><span>YouTrack/Escalations</span></strong><br/> <br/><strong><span>-              SAFS-14996/Escalation 24391</span></strong><br/> <br/><strong><span>Customers</span></strong><br/><strong><span>-              Northwestern University</span></strong><br/> <br/><strong><span>Cumulative List of fixes included since Service Pack:</span></strong><br/> <br/>-              SAFS-1582  9969 - FSAA | Timeout while compressing SQLites on proxy<br/>-              SAFS-2324  Investigate FSAA functionality when there is lack of access to IPC$<br/>-              SAFS-2359 16217 - Error Getting Activity Count from TBL_FSAC_ActivityEvents: Overflow while converting variant of type (OleStr) into type (Integer)<br/>-              SAFS-2442 - DFS Scan: Error during processing: cannot DETACH database within transaction[0x0001] DETACH DATABASE Struc<br/>-              SAFS-2411  16651 - FS_Migration Finishes with Success but doesn't Add USN Column to Activity Tier 2<br/>-              SAFS-2364  12262 - FSAA | Do not overwrite trace.log files<br/>-              SAFS-2515  FSAC: Scan is throwing an error "Buffer too small'"<br/>-              SAFS-2490  17161 - FSAC collection stuck in loop<br/>-              SAFS-2518  FSAC: Not returning full data when parsing huge zipped file<br/>-              SAFS-2574  FSAA: FSAC scan parses local sa console logs instead of windows cluster node<br/>-              SAFS-2571  FSAC: Scan should show percentage value as a scan status.<br/>-              SAFS-2626 : Cache was not properly handling files/folders with same names in same parent folder (can happen from deletion/recreation)<br/>-              SAFS-2559: 17476 - FSAC eM is not valid integer error<br/>-              SAFS-2739: 19535 - Update FSAC to collect log files without BOMs<br/>-              SAFS-2767 NFS scans aren't picking up files<br/>-              SAFS-2743 DFS listing wrong active link<br/>-              SAFS-2628 18381 - Server Scan file doesn't upload to the console.<br/>-              SAFS-2777 20796 - FSAA | Error when checking for active sessions on proxy<br/>-              SAFS-2837 19948 - DFS: Unique Key violation<br/>-              SAFS-2698 19491 - FSAA not traversing mounted volumes<br/>-              SAFS-2922 Update FSAAConfig.xml to properly handle list permissions<br/>-              SAFS-2736 20328 - FSAC System scan does not collect all events<br/>-              SAFS-2809 20970 - INSERT statement conflicted with the FOREIGN KEY constraint "FK_SA_FSAC_ActivityEvents_New_PathID"<br/>-              SAFS-2205 13113 - Detect and throw an error when an invalid share (e.g., one with a backslash) is detected<br/>-              SAFS-2329 16097 - FSAA | DFS Uses NTDomainName instead of FQDN<br/>-              SAFS-3020 FSAC: Offset value not resetting when scanning a new log for same day<br/>-              SAFS-2762 SDD | Enhance to retain LastAccessTime<br/>-              SAFS-3003 FSAA: Utilize Restore privileges when preserving LAT<br/>-              SAFS-2986 21818 - Migration OOM / Duplicate Column GatesProxyID<br/>-              SAFS-3026 22073 - FSAA | FKCV Errors After Applying Hotfix<br/>-              SAFS-14532 Make "Force preservation" option hidden by default<br/>-              SAFS-14541 Remove Description in FSAAConfig.xml<br/>-              SMPC-3911 Update SEEK Components to accept all configuration settings<br/>-              SAFS-14573 22741 - FSAA Migration Query 7.2 to 8.0 Duplicate Column Error<br/>-              SAFS-2705 15281 - FSAA unspecified error<br/><strong><span>-              SAFS-3056 Add automatic procdump functionality for FSAA applet</span></strong><br/><strong><span>-              SAFS-14593 Update bulk import to not delete Activity and DLPEX tier 2 dbs.</span></strong><br/><strong><span>-              SAFS-14598 22741 - FSAA Migration Query 7.2 to 8.0 Could not convert variant of type (Null) into type (Integer)</span></strong><br/><strong><span>-              SAFS-2707 19757 - FSAC Bulk Import Rollback Due to Unspecified Error</span></strong><br/><strong><span>-              SAFS-14566 Update FSAA to pass parameters to SDD</span></strong><br/><strong><span>-              SAFS-14672 FSAC Access Violation on scans</span></strong><br/><strong><span>-              SAFS-14694 23344 - TFSAAAppletObjectProcessor.GetScanDatabaseFromExecHostWithRetry "Error downloading scan database from exec host</span></strong><br/><strong><span>-              SAFS-14702 22116 - Do Not Delete Activity Data Automatically (7.2 and 8.0 Implementation)</span></strong><br/><strong><span>-              SAFS-14688 Applet log level of "None" sends all log messages to StealthAUDITRPC.exe trace log file</span></strong><br/><strong><span>-              SAFS-2771 20689 - Error during storing DailyActivity: '' is not a valid integer value</span></strong><br/><strong><span>-              SAFS-14656 23094 - Strip trailing spaces from shares' landing folders</span></strong><br/><strong><span>-              SAFS-2957 21750 - FSAA | Skip IPC$ check in applet mode</span></strong><br/><strong><span>-              SAFS-14607 22956/23113 - Waiting for Parser Queue to be Empty</span></strong><br/><strong><span>-              SAFS-14809 Automatic procdump functionality in FSAA applet can cause access violations after scan completes</span></strong><br/><strong><span>-              SAFS-14597 Add RPC_IF_ALLOW_CALLBACKS_WITH_NO_AUTH and auth callback even if not using secure RPC to permit working with RestrictRemoteClients=1</span></strong><br/><strong><span>-              SAFS-14803 FSAC: Add option of maximum size of activity to scan at once</span></strong><br/><strong><span>-              SAFS-14800 23738 - SDD Scoping to folders: Added a warning log message if the ScanResourceFilter option is using the unsupported target "Resource"</span></strong><br/><strong><span>-              SAFS-2692 19369/19531 - FSAA | Shares Marked as Deleted When Access to Enumerate Shares is Revoked</span></strong><br/><strong><span>-              SAFS-14824 20963 - FSAA Failed to Copy Tier 2: Prop DB was being compressed during non-permission scans</span></strong><br/><strong><span>-              SAFS-14888 24391 - Foreign Key Constraint Violation</span></strong><br/> <br/><strong><span>Fixes since last hotfix:</span></strong><br/><strong><span>-              SAFS-14791 Change FSAA/FSAC to create SQLite temporary files in FSAA folder</span></strong><br/><strong><span>-              SAFS-14485 18434: FSAC Support milliseconds in event timestamps</span></strong><br/><strong><span>-              SAFS-14996 24391 - Foreign Key Constraint Violation</span></strong><br/> <br/><b>Comments:</b><br/><strong><span><span>THIS HOTFIX REQUIRES AT LEAST HOTFIX SDD_8.0_006 TO BE INSTALLED IF USING SDD.</span></span></strong><br/><a href="https://na55.salesforce.com/articles/General/Hotfix-SDD-8-0-006" target="_blank"><strong><span>https://na55.salesforce.com/articles/General/Hotfix-SDD-8-0-006</span></strong></a> 
<div> </div><p><strong><span class="wysiwyg-font-size-large">Instructions:</span></strong>   
</p><ol><li>Unblock the hotfix zip file in the windows property dialog, if an unblock button exists there. 
</li><li>Close all instances of StealthAUDIT (check task manager under processes for all users)
</li><li>
<strong><span>Update all DC files in your %SAInstallDir%DC folder</span></strong>
</li><li>
<strong><span>Update all PrivateAssemblies in your %SAInstallDir%PrivateAssemblies folder.</span></strong>
</li><li><strong><span>Launch StealthAUDIT. Run the 'Update Proxy Service' query under the Maintenance tab in the FSAA data collector against your proxy servers (if running proxy service).</span></strong></li></ol>
<div>  
<div class="table-wrap"><table count-columns="1" cellspacing="0" cellpadding="0" width="64" border="0"><tbody><tr height="38"><td colspan="1" rowspan="1" height="38" width="64"><a href="https://downloads.stealthbits.com/access/files/SAHotFixes/8.0/SA_8.0_089.zip" target="_blank">https://downloads.stealthbits.com/access/files/SAHotFixes/8.0/SA_8.0_089.zip</a></td></tr></tbody></table></div>
</div><p><strong><span class="wysiwyg-font-size-large">Product:</span></strong> StealthAUDIT<br/><strong><span class="wysiwyg-font-size-large">Module:</span></strong> SA - DC - FSAA - Activity;SA - DC - FSAA - DFS;SA - DC - FSAA - Permissions;SA - DC - FSAA - Sensitive Data<br/><strong><span class="wysiwyg-font-size-large">Versions:</span></strong> 8.0<br/><strong><span class="wysiwyg-font-size-large">Dev Ticket:</span></strong> SAFS-14996<br/><strong><span class="wysiwyg-font-size-large">Resolved In:</span></strong> -	DCFSAA.dll			8.0.838
-	FSAASrv.dll			8.0.838

Other dependencies included:
-	StealthAUDITRPC.exe	8.0.96
-	StealthAUDITRPCClient.dll	8.0.96
-	SATagParser.dll		8.0.10
-	FSAAConfig.xml<br/><strong><span class="wysiwyg-font-size-large">Salesforce Article ID:</span></strong> 1940<br/></p></div>
</article></body></html>