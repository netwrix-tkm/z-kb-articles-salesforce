<?xml version="1.0" encoding="UTF-8"?>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Hotfix: SA_7.2_028</title>
    <meta name="label" content="employees_v" />
    <meta name="label" content="skb" />
    <meta name="KnowledgeArticleId" content="kA04u0000000IhVCAU" />
    <meta name="Id" content="ka04u000000HcteAAC" />
    <meta name="LastPublishedDate" content="2022-02-01T18:28:10.000+0000" />
    <meta name="LastModifiedDate" content="2023-05-08T10:09:59.000+0000" />
    <meta name="FirstPublishedDate" content="2022-02-01T18:28:10.000+0000" />
    <meta name="Language" content="en_US" />
    <meta name="UrlName" content="6944" />
    <meta name="ArticleNumber" content="000006944" />
    <meta name="description" content="360012217812" />
  </head>
  <body>
    <article class="kb-articles">
      <div class="Content__c">
        <p>
          <strong><span class="wysiwyg-font-size-large">Summary:</span></strong> This is a fix for
          foreign key constraint errors that show up due to roles changes during a scan. The DC is
          attempting to write a permission with a reference to a role which doesn't exist in the
          database. Now the DC validates the roles specified in permissions before attempting to
          write them, skips writing the permission row with a warning if the validation fails.
        </p>
        <p>
          <strong><span class="wysiwyg-font-size-large">Issue:</span></strong> This is a fix for
          foreign key constraint errors that show up due to roles changes during a scan. The DC is
          attempting to write a permission with a reference to a role which doesn't exist in the
          database. Now the DC validates the roles specified in permissions before attempting to
          write them, skips writing the permission row with a warning if the validation fails.<br /><br />Error
          example that is resolved by this hotfix: "Error handling SBSPOSvr permission(2) result
          notification: fc1f2472-6b27-4672-80c9-257c9037ed1f System.Data.SqlClient.SqlException
          (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint
          FK_SA_SPO_SPPermissions_RoleID". The conflict occurred in database "StealthAudit2", table
          "dbo.SA_SPO_SPRoles""<br /><br />Example Warning after fix is installed: "While recording
          permissions a role was discovered which was added mid scan. The permission has been
          omitted."<br /><br /><br />-SASP-1205\11418<br /><br />Customers<br />Novartis
          Corporation, Allstate<br /><br />Cumulative List of fixes included since Service Pack:<br />-
          SASP-1090/11359, 11363 - Service account access change for private sites<br />- SASP-975
          Getting Primary Key constraint when running a collection group for O365<br />- SASP-980 -
          Fix for OOM errors and DLPTemp folder cleanup
        </p>
        <p>
          <strong><span class="wysiwyg-font-size-large">Instructions:</span></strong> Update all
          files in appropriate directories under SA install Directory.  Restart SA.<br /> 
        </p>
        <div class="table-wrap">
          <table count-columns="1" cellspacing="0" cellpadding="0" width="64" border="0">
            <colgroup>
              <col width="64" />
            </colgroup>
            <tbody>
              <tr height="20">
                <td colspan="1" rowspan="1" class="xl65" height="20" width="64">
                  <a
                    href="http://downloads.stealthbits.com/access/files/SAHotFixes/7.2/SA_7.2_028.zip"
                    target="_blank"
                    >http://downloads.stealthbits.com/access/files/SAHotFixes/7.2/SA_7.2_028.zip</a
                  >
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>
          <strong><span class="wysiwyg-font-size-large">Product:</span></strong>
          StealthAUDIT<br /><strong><span class="wysiwyg-font-size-large">Module:</span></strong> SA
          - DC - SPO<br /><strong><span class="wysiwyg-font-size-large">Versions:</span></strong>
          7.1, 7.2<br /><strong><span class="wysiwyg-font-size-large">Dev Ticket:</span></strong>
          SASP-1205<br /><strong><span class="wysiwyg-font-size-large">Resolved In:</span></strong>
          -SBSPOSvr.exe 7.2.23.505 -SBSPOSvr.exe.config -DCSharePointOnline.dll 7.2.0.505
          -Stealthbits.StealthAUDIT.DataCollectors.SharePointDLP.Common.dll 7.2.16.505
          -Stealthbits.StealthAUDIT.DataCollectors.SharePointDLP.dll 7.2.19.505
          -Stealthbits.StealthAUDIT.DataCollectors.SharepointDLP.UI.dll 7.2.15.505
          -Stealthbits.StealthAUDIT.DataCollectors.DLP.Common.dll 7.2.15.505<br /><strong
            ><span class="wysiwyg-font-size-large">Salesforce Article ID:</span></strong
          >
          1415<br />
        </p>
      </div>
    </article>
  </body>
</html>
