<?xml version="1.0" encoding="UTF-8"?>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Hotfix: SA_11.0_006</title>
    <meta name="label" content="skb" />
    <meta name="label" content="employees_v" />
    <meta name="KnowledgeArticleId" content="kA04u0000000I8pCAE" />
    <meta name="Id" content="ka04u000000HcgWAAS" />
    <meta name="LastPublishedDate" content="2022-02-01T18:04:02.000+0000" />
    <meta name="LastModifiedDate" content="2023-05-08T10:03:35.000+0000" />
    <meta name="FirstPublishedDate" content="2022-02-01T18:04:02.000+0000" />
    <meta name="Language" content="en_US" />
    <meta name="UrlName" content="6241" />
    <meta name="ArticleNumber" content="000006241" />
    <meta name="description" content="360012217892" />
  </head>
  <body>
    <article class="kb-articles">
      <div class="Content__c">
        <p>
          <strong>Summary: </strong>  Failed to import SA_FSDLP_Matches: Violation of PRIMARY KEY
          constraint 'PK_SA_FSDLP_Matches'. (Remediation)
        </p>
        <p>
          <strong>Before Fix: </strong>In a situation where an SDD scan was abruptly killed, the
          subsequent scan would not clear out SDD matches for resources that were being scanned.
          This could result in duplicate SDD matches in the DLPEX databases and a PK error on the
          next bulk import.
        </p>
        <p>
          <strong>After Fix: </strong>The built-in FSAA Repair tool has been updated to remediate
          this situation if it arises. Repair tool will clean up any duplicate SDD matches, which
          should allow bulk import to complete.
        </p>
        <p><strong>Submitted by: </strong></p>
        <p>Michael Burrofato</p>
        <p><strong>Affected Versions:</strong></p>
        <p>11.0</p>
        <p><strong>Affected Module:</strong></p>
        <p>SA – DC – FSAA</p>
        <p><strong> </strong></p>
        <p><strong>Dev Ticket:</strong></p>
        <ul>
          <li>SAFS-20792</li>
        </ul>
        <p><strong>Resolved in Version:</strong></p>
        <ul>
          <li>DC\DCFSAA.dll              11.0.1318</li>
          <li>DC\FSAASrv.dll              11.0.1318</li>
          <li>PrivateAssemblies\Stealthbits.StealthAUDIT.DataCollectors.FSAA.dll 11.0.1318</li>
          <li>PrivateAssemblies\Stealthbits.StealthAUDIT.DataCollectors.FSAA.UI.dll 11.0.1318</li>
        </ul>
        <p><strong>Other dependencies included:</strong></p>
        <ul>
          <li>DC\AIPHelper.dll</li>
          <li>DC\FSAAnetApp.dll</li>
          <li>DC\FSAATagHelper.exe</li>
          <li>DC\libnfs.dll</li>
          <li>DC\SDDScanAPI32.dll</li>
          <li>DC\sqlite3.dll</li>
          <li>DC\StealthAUDITRPC.exe</li>
          <li>DC\StealthAUDITRPCClient.dll</li>
          <li>DC\UpdateFSAAService.exe</li>
          <li>PrivateAssemblies\StealthAUDITRPCClient.dll</li>
          <li>PrivateAssemblies\Stealthbits.StealthAUDIT.DataCollectors.FSAA.RPCClient.dll</li>
        </ul>
        <p><strong>KB Type: </strong></p>
        <p>               Hotfix</p>
        <p><strong> </strong></p>
        <p><strong>YouTrack/Escalations</strong></p>
        <p><strong> </strong></p>
        <p><strong>-              SAFS-20792/58021</strong></p>
        <p> </p>
        <p><strong>Cumulative List of fixes included since Service Pack:</strong></p>
        <p>
          <strong
            >-              SAFS-20593 FSAA SDD: SEEK Bulk Import Results table shows inaccurate
            counts for Matches and MatchHits when using SDD Parallelism</strong
          >
        </p>
        <p>
          <strong
            >-              SAFS-20792 Failed to import SA_FSDLP_Matches: Violation of PRIMARY KEY
            constraint 'PK_SA_FSDLP_Matches'. (Remediation)</strong
          >
        </p>
        <p> </p>
        <p><strong>List of changes since last Hotfix</strong></p>
        <p> </p>
        <p><strong>Instructions:</strong></p>
        <ol>
          <li>
            Unblock the hotfix zip file in the windows property dialog, if an unblock button exists
            there. 
          </li>
          <li>
            Close all instances of StealthAUDIT (check task manager under processes for all users)
          </li>
          <li>Update all DC files in your %SAInstallDir%DC folder</li>
          <li>Update all PrivateAssemblies in your %SAInstallDir%PrivateAssemblies folder.</li>
          <li>
            Run the ‘Update Proxy Service’ query under the Maintenance tab in the FSAA data
            collector against your proxy servers (if running proxy service).
          </li>
          <li>
            Use the Maintenance Repair Hosts tool within the FSAA data collector to repair the
            host(s) that has the error during bulk import.
          </li>
          <li>Run bulk import for the repaired hosts.</li>
          <li>
            After running the maintenance tool and successfully importing data, customers who were
            running a differential scan when the issue occurred should set their differential scan
            settings to before their previous scan (when the issue occurred). The next scan should
            also be a new scan and not a resumed scan.
          </li>
        </ol>
        <p>
          <strong
            ><a
              href="https://downloads.stealthbits.com/access/files/SAHotFixes/11.0/SA_11.0_006.zip"
              target="_blank"
            >
              https://downloads.stealthbits.com/access/files/SAHotFixes/11.0/SA_11.0_006.zip</a
            ></strong
          >
        </p>
        <p> </p>
      </div>
    </article>
  </body>
</html>
